# Bash commands 

This is a link which has a good diagrams on most usefull linux command : https://xmind.app/m/WwtB/

You can write a *.sh file which consists of bash commands and then 
execute all of them by running that file . 

in bash we have **for** , **if** and **switch case** .

In the case that they are needed search for them , just know that they exist . 


`|` is the seperator for commads. You can put multiple commands in a row seperated using this character. 

With using this character, the output of previous command is the input of currnet command.  

```
command 1 | command 2 | command 3
```

Here the output of command 1 goes to command 2 and the output of command 2 goes to command 3. 

I think command2 act command1's outputs as a file. For example the `awk` command takes a file as input but using `|` we do not need to pass file path to it. 

## declare 
allows you to update attributes applied to variables . 
parameters : 
* -A : defines associative array ( associative array is like dictionaries in python )
* -a : defines indexed array
* -r : defines readonly variables .

* A script is a piece of code that executes only one time . It can be in any language .

parameters : 
* complete it ...

## netplan 

I used it for setting new DNS servers. 

* What is DNS servers ? 

You enter this in the command line :
```bash
sudo vim /etc/netplan/00-installer-config.yaml
```

In that directory is only one yaml file that may have different name. That's ok.

You see a file like below: 
```
network:
  ethernets:
    ens33:
      dhcp4: true
  version: 2
```

For adding new dns servers change the file to this form:
```
network:
  ethernets:
    ens33:
      dhcp4: true
      nameservers:
        addresses: [185.51.200.2,178.22.122.100]
  version: 2
```

Then run :
```bash
sudo netplan apply
```

## System ctl

I don't know what is it, I just used it once to **restart docker**.

## find
is a built-in function which finds a file or directory . 
parameters : 
* -name : with this you specify the file or directory name .
* -type : if its d , you are searching for a directory .

## echo

consider you have a parameter called len , if you execute "echo len" ,
you will get the "len" . 

To act len like its a variable and to get its value , you should type "echo ${len}"

An example : 
```bash
declare -a names
names=(
  'name1'
  'name2'
  'name3'
)

len=${#names[@]}

for name in "${!names[@]}"; do
    echo ${names[$name]}
    if [ ${names[$name]} == 'name2' ]; then
        echo 'found'
    fi
done
```

We can also define methods with bash . for example : 

{bring an example}

and call it like this : 
```bash
    deploy_project $project
```

## Normal operations 

Restart : 
```bash
sudo reboot
```

## usermod 

You can use this to give access to users. 

For example by default while using docker you need to add `sudo` but with the command below: 

```bash
sudo usermod -aG docker [user]
```

You can remove the need for sudo.

## alias

example : 
```bash
alias swagger='docker run --rm -it  --user $(id -u):$(id -g) -e GOPATH=$(go env GOPATH):/go -v $HOME:$HOME -w $(pwd) quay.io/goswagger/swagger'
```

Before the above command, if you type swagger in terminal you will get nothing.
But after you entered this command, swagger acts like a new command in your terminal.

## apk

In a pipeline when the underlying machine doesn't have needed tools, `apk` is used to install necessary tools.

Example:
```bash
apk add curl jq coreutils
```

With this command, curl, jg and coreutils is installed to the machine. 

* Sometimes the `make` command (the command that executes commands in a makefile) is not available. In this situation use `apk add make`.

## chmod, usermod

I think these commands are used to give permissions to executable files. 

The files that are used for installing a tool. 

## awk

awk includes a pattern and a command. 
```bash
awk 'pattern { action }' input-file
```

Search for a word in a file : 
```bash
awk '/pattern/ {print}' file.txt
```

Getting the lines of a file:
```bash
awk 'END {print NR}' file.txt
```

We can put multiple commands in a single awk : 
```bash
awk '{sum += $1} END {print "Total:", sum}' numbers.txt
```

here we have a sum, then a pattern, at last another command.

## xargs

`xargs` applies a command to all elements of it's previous. It's always comes after `|` character because it wants to be applied of a command's output.

deleting pods of an application using regex : 
```bash
kubectl get pods -n default --no-headers=true | awk '/web-app/{print $1}'| xargs  kubectl delete -n default pod
```

## curl
curl is used to make a http request . 

A curl script can be generated by Postman . 
 
### Flags
`-X`

`Get` 

`-vvv` extremely verbose (also print internal state transitions)
